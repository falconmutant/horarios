{% extends 'base.html' %}
{% block title %}
  Maestro
{% endblock title %}
{% block maestro %}
  active open selected
{% endblock maestro %}
{% block css %}
{% load staticfiles %}
  <link type="text/css" href="{% static "core/css/pnotify.css" %}" rel="stylesheet">
  <style type="text/css">
    .a-details,.a-details:hover{
      float: right;
      border-radius: 6px !important;
    }
    .table td {
      text-align: center;
    }
    .btn, .form-control{
      border-radius: 4px !important;
    }
  </style>
{% endblock css %}

{% block content %}
<button type="button" class="btn btn-primary a-details" data-toggle="modal" data-target="#registro">Registrar Maestro</button>
<br>
<br>
<hr>
<table id="tabletools" class="table table-striped table-bordered dt-responsive nowrap" cellspacing="0" width="100%">
<thead>
  <tr>
    <th>Maestro</th>
    <th>Modificar</th>
    <th>Eliminar</th>
    <th>Disponibilidad</th>
    <th>Materia</th>
  </tr>
</thead>
<tbody id="tb">
</tbody>
</table>
{% endblock content %}

{% block modal %}
  <div class="modal fade bs-example-modal-lg" tabindex="-1" id="registro" role="dialog" aria-labelledby="myLargeModalLabel">
    <div class="modal-dialog modal-lg" role="document">
      <div class="modal-content">
        <div class="modal-header">
          <h4 class="modal-title" id="myModalLabel">Registro de Maestro</h4>
        </div>
        <form action="" class="form-horizontal" method="post">{% csrf_token %}
          <div class="modal-body">
            <div class="form-group">
              <div class="form-group">
                <label for="state_id" class="col-sm-2 control-label">Nombre</label>
                <div class="col-sm-4">
                  <input name="nombre" required class="form-control" type="text">
                </div>
                <label for="municipality_id" class="col-sm-1 control-label">Paterno</label>
                <div class="col-sm-4">
                  <input name="paterno" required class="form-control" type="text">
                </div>
              </div>
              <div class="form-group">
                <label for="municipality_id" class="col-sm-2 control-label">Materno</label>
                <div class="col-sm-4">
                  <input name="materno" required class="form-control" type="text">
                </div>
                <label for="municipality_id" class="col-sm-1 control-label">Contrato</label>
                <div class="col-sm-4">
                  <select name="contrato" class="form-control" required>
                    <option></option>
                    {% for value in contrato %}
                      <option value="{{value.0}}">{{value.1}}</option>
                    {% endfor %}
                  </select>
                </div>
              </div>
              <div class="form-group">
                <label for="municipality_id" class="col-sm-2 control-label">Proyecto Financiado</label>
                <div class="col-sm-4">
                  <select name="proyecto" class="form-control" required>
                    <option></option>
                    {% for value in proyecto %}
                      <option value="{{value.0}}">{{value.1}}</option>
                    {% endfor %}
                  </select>
                </div>
                <label for="municipality_id" class="col-sm-1 control-label">Grado Estudio</label>
                <div class="col-sm-4">
                  <select name="grado" class="form-control" required>
                    <option></option>
                    {% for value in grado %}
                      <option value="{{value.0}}">{{value.1}}</option>
                    {% endfor %}
                  </select>
                </div>
              </div>
            </div>
          </div>
          <div class="modal-footer">
            <button type="button" class="btn btn-default" data-dismiss="modal">Cancelar</button>
            <button type="submit" class="btn btn-primary">Registrar</button>
          </div>
        </form>
      </div>
    </div>
  </div>
{% endblock modal %}

{% block javascript %}
  <script type="text/javascript" src="{% static "core/js/pnotify.min.js" %}"></script>
  <script type="text/javascript">
  $(document).ready(function() {
    var table = $('#tabletools').dataTable({
      ajax: {
              url: '/maestro/datatable',
              dataSrc: ''
          },
      columns: [
        { data: 'Nombre' },
        { data: 'Modificar' },
        { data: 'Eliminar' },
        { data: 'Disponibilidad' },
        { data: 'Materia' }
      ],
        "language": {
            "lengthMenu": "_MENU_",
            "sProcessing":     "Procesando...",
            "sZeroRecords":    "No se encontraron resultados",
            "sEmptyTable":     "Ningún dato disponible en esta tabla",
            "sInfo":           "Mostrando registros del _START_ al _END_ de un total de _TOTAL_ registros",
            "sInfoEmpty":      "Mostrando registros del 0 al 0 de un total de 0 registros",
            "sInfoFiltered":   "(filtrado de un total de _MAX_ registros)",
            "sInfoPostFix":    "",
            "sUrl":            "",
            "sInfoThousands":  ",",
            "sLoadingRecords": "Cargando...",
            "oPaginate": {
                "sFirst":    "Primero",
                "sLast":     "Último",
                "sNext":     "Siguiente",
                "sPrevious": "Anterior"
            },
            "oAria": {
                "sSortAscending":  ": Activar para ordenar la columna de manera ascendente",
                "sSortDescending": ": Activar para ordenar la columna de manera descendente"
            }
        }
    });
    $('.dataTables_filter input').attr('placeholder','Buscar');
    $('#example_length').hide();

    //DOM Manipulation to move datatable elements integrate to panel
    $('.panel-ctrls').append($('.dataTables_filter').addClass("pull-right")).find("label").addClass("panel-ctrls-center");
    $('.panel-ctrls').append("<i class='separator'></i>");
    $('.panel-ctrls').append($('.dataTables_length').addClass("pull-left")).find("label").addClass("panel-ctrls-center");
    $('.dataTables_paginate>ul.pagination').addClass("pull-right m0");
  });
  </script>
  {% if mensaje == 1 %}
    <script>
      $(document).ready(function(){
        new PNotify({
                title: 'Exito',
                text: 'El maestro se registro con exito!',
                type: 'success',
                styling: 'fontawesome'
              });
      });
    </script>
  {% endif %}
{% endblock javascript %}